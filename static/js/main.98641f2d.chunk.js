(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,a){e.exports=a(377)},377:function(e,t,a){"use strict";a.r(t);var r,n=a(0),o=a.n(n),c=a(28),i=a.n(c),l=a(14),s=a(15),u=a(18),h=a(17),d=a(19),p=a(53),m=a.n(p),f=a(83),b=a.n(f),g=a(84),v=a.n(g),w=a(33),y=a.n(w),E=a(36),k=a.n(E),P=a(30),O=a.n(P),j=a(63),x=a.n(j),C=a(147),S=a.n(C),T=a(44),B=a.n(T),R=a(26),D=a.n(R),_=a(16),N=a(42),L=a.n(N),I=a(82),A=a.n(I),q=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentTab,a=e.handleTabChange;return o.a.createElement(o.a.Fragment,null,o.a.createElement(A.a,{value:t,onChange:a,variant:"scrollable",textColor:"inherit",color:"inherit",indicatorColor:"secondary"},o.a.createElement(L.a,{label:"Single Player"}),o.a.createElement(L.a,{label:"Cooperative"}),o.a.createElement(L.a,{label:"Overall"}),o.a.createElement(L.a,{label:"Records"}),o.a.createElement(L.a,{label:"About"})))}}]),t}(o.a.Component),F=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={open:!1},e.showDrawer=function(t){return function(){e.setState({open:t})}},e.gotoPage=function(t){return function(){window.open(e.homepage+t,"_self")}},e.homepage="https://nekzor.github.io/",e.pageLinks=[{text:"Glitches",link:"glitches.html"},{text:"Least Portals",link:"lp.html"},{text:"Demo Parser",link:"parser.html"}],e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.currentTab,n=t.onTabChange,c=o.a.createElement("div",{className:a.list},o.a.createElement(k.a,null,o.a.createElement(O.a,{button:!0,key:0,onClick:this.gotoPage(this.homepage+"index.html")},o.a.createElement(x.a,{primary:"nekzor.github.io"}))),o.a.createElement(b.a,null),o.a.createElement(k.a,null,this.pageLinks.map(function(t,a){return o.a.createElement(O.a,{button:!0,key:a,onClick:e.gotoPage("".concat(t.link))},o.a.createElement(x.a,{primary:t.text}))})));return o.a.createElement("div",{className:a.root},o.a.createElement(m.a,{position:"fixed"},o.a.createElement(B.a,null,o.a.createElement(y.a,{onClick:this.showDrawer(!0),className:a.menuButton,color:"inherit","aria-label":"Menu"},o.a.createElement(S.a,null)),o.a.createElement(D.a,{variant:"h6",color:"inherit"},"Least Portals")),o.a.createElement(q,{currentTab:r,handleTabChange:n})),o.a.createElement(v.a,{open:this.state.open,onClose:this.showDrawer(!1),onOpen:this.showDrawer(!0)},o.a.createElement("div",{tabIndex:0,role:"button",onClick:this.showDrawer(!1),onKeyDown:this.showDrawer(!1)},c)))}}]),t}(o.a.Component),M=Object(_.withStyles)(function(e){return{root:{paddingBottom:14*e.spacing.unit},list:{width:25*e.spacing.unit},menuButton:{marginLeft:-12,marginRight:20}}})(F),W=a(54),H=a.n(W),U=a(86),z=a.n(U),V=a(148),Y=a.n(V),J=a(85),K=a.n(J),G=a(23),Q=a.n(G),$=a(25),X=a.n($),Z=a(32),ee=a.n(Z),te=a(39),ae=a.n(te),re=a(40),ne=a.n(re),oe=a(22),ce=a.n(oe),ie=a(37),le=a.n(ie),se=a(41),ue=a.n(se),he=a(31),de=a.n(he),pe=a(38),me=a.n(pe),fe=a(27),be=a.n(fe),ge=function(e,t,a){var r=function(e,t){return t[a]<e[a]?-1:t[a]>e[a]?1:0},n="desc"===t?function(e,t){return r(e,t)}:function(e,t){return-r(e,t)};return e.map(function(e,t){return[e,t]}).sort(function(e,t){var a=n(e[0],t[0]);return 0!==a?a:e[1]-t[1]}).map(function(e){return e[0]})},ve=[{id:"name",numeric:!1,sortable:!0,label:"Map"},{id:"score",numeric:!0,sortable:!0,label:"Portals"},{id:"wrDelta",numeric:!0,sortable:!0,label:"\u0394WR"}],we=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,r=t.orderBy;return o.a.createElement(le.a,null,o.a.createElement(de.a,null,ve.map(function(t){return o.a.createElement(ce.a,{key:t.id,align:(t.numeric,"center"),padding:t.disablePadding?"none":"default",sortDirection:r===t.id&&a},!0===t.sortable&&o.a.createElement(be.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(me.a,{active:r===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)),!1===t.sortable&&t.label)},this)))}}]),t}(o.a.Component),ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"index",page:0,rowsPerPage:100},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.data,t=this.state,a=t.order,r=t.orderBy,n=t.rowsPerPage,c=t.page;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ae.a,{"aria-labelledby":"tableTitle"},o.a.createElement(we,{order:a,orderBy:r,onRequestSort:this.handleRequestSort,rowCount:e.length}),o.a.createElement(ne.a,null,ge(e,a,r).slice(c*n,c*n+n).map(function(e){return o.a.createElement(de.a,{hover:!0,tabIndex:-1,key:e.id},o.a.createElement(ce.a,{align:"center"},o.a.createElement(ee.a,{target:"_blank",rel:"noopener",color:"inherit",href:"https://steamcommunity.com/stats/Portal2/leaderboards/".concat(e.id)},e.name)),o.a.createElement(ce.a,{align:"center"},e.score),o.a.createElement(ce.a,{align:"center"},null!==e.wrDelta?0===e.wrDelta?"-":"+".concat(e.wrDelta):"n/a"))}))),o.a.createElement(ue.a,{rowsPerPageOptions:[5,10,20,50,100],component:"div",count:e.length,rowsPerPage:n,page:c,labelDisplayedRows:function(){return""},backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(o.a.Component),Ee=a(62),ke=a.n(Ee),Pe=function(e){return o.a.createElement(ke.a,Object.assign({direction:"up"},e))},Oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).gotoSteamProfile=function(e){window.open("https://steamcommunity.com/profiles/".concat(e),"_blank").opener=null},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.dialogOpen,n=t.handleClose,c=t.data,i=t.profileId;return o.a.createElement(o.a.Fragment,null,o.a.createElement(K.a,{fullScreen:!0,open:r,onClose:n,TransitionComponent:Pe},o.a.createElement(m.a,{position:"sticky"},o.a.createElement(B.a,null,o.a.createElement(be.a,{placement:"bottom",title:"Open Steam profile",disableFocusListener:!0,disableTouchListener:!0},o.a.createElement(z.a,{color:"inherit",onClick:function(){return e.gotoSteamProfile(i)}},o.a.createElement(H.a,{src:c.profile.avatar}))),o.a.createElement(D.a,{variant:"h6",color:"inherit",className:a.flex},"\xa0\xa0\xa0",c.profile.name),o.a.createElement(y.a,{color:"inherit",onClick:n,"aria-label":"Close"},o.a.createElement(Y.a,null)))),o.a.createElement(Q.a,{container:!0,className:a.gridView},o.a.createElement(Q.a,{item:!0,xs:!1,md:1,lg:3}),o.a.createElement(Q.a,{item:!0,xs:12,md:10,lg:6},o.a.createElement(X.a,null,o.a.createElement(ye,{data:c.entries}))))))}}]),t}(o.a.Component),je=Object(_.withStyles)(function(e){return{gridView:{marginTop:3*e.spacing.unit},flex:{flex:1}}})(Oe),xe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).description=["This leaderboard includes all legit players who care about least portal records in Portal 2.","","How it works:","- Page generator fetches 5k entries per leaderboard due to the limit for one API call","- Some leaderboards are excluded because too many players are tied for 1st, 2nd rank etc.","- Users who tied the world record will be prioritized","- Cheaters with invalid scores will be ignored"],e.tooltip="Automatic ban system catches users who cheated at least once.",e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,r=this.description.map(function(e,t){return o.a.createElement(O.a,{key:t},o.a.createElement(D.a,{variant:"body1"},e))}),n=o.a.createElement(ee.a,{rel:"noopener",href:"https://nekzor.github.io/SteamCommunity.Net"},"SteamCommunity.Net"),c=o.a.createElement(be.a,{placement:"right",title:this.tooltip,disableFocusListener:!0,disableTouchListener:!0},o.a.createElement(ee.a,{className:t.help},a.cheaters.length));return o.a.createElement(o.a.Fragment,null,o.a.createElement(Q.a,{container:!0},o.a.createElement(Q.a,{item:!0,xs:!1,md:1,lg:3}),o.a.createElement(Q.a,{item:!0,xs:12,md:10,lg:6},o.a.createElement(X.a,{className:t.aboutBox},o.a.createElement(k.a,{className:t.list,dense:!0},o.a.createElement(O.a,null,o.a.createElement(D.a,{component:"h2",variant:"h5"},"Who's the lp king?")),r,o.a.createElement(O.a,null),o.a.createElement(O.a,null,o.a.createElement(D.a,{variant:"subtitle1"},"Made with ",n)),o.a.createElement(O.a,null,o.a.createElement(D.a,{variant:"subtitle1"},"Number of detected cheaters: ",c)),o.a.createElement(O.a,null,o.a.createElement(D.a,{variant:"subtitle1"},"Last Update: ",a.export_date)))))))}}]),t}(o.a.Component),Ce=Object(_.withStyles)(function(e){return{help:{cursor:"help"},aboutBox:{padding:3*e.spacing.unit}}})(xe),Se=a(87),Te=a.n(Se),Be=a(52),Re=a.n(Be),De=a(149),_e=a.n(De),Ne=[{id:"name",numeric:!1,sortable:!0,label:"Map"},{id:"wr",numeric:!0,sortable:!0,label:"Portals"},{id:"ties",numeric:!0,sortable:!0,label:"Ties"},{id:"video",numeric:!0,sortable:!1,label:"Video"}],Le=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,r=t.orderBy;return o.a.createElement(le.a,null,o.a.createElement(de.a,null,Ne.map(function(t){return o.a.createElement(ce.a,{key:t.id,align:t.numeric?"center":"left",padding:t.disablePadding?"none":"default",sortDirection:r===t.id&&a},!0===t.sortable&&o.a.createElement(be.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(me.a,{active:r===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)),!1===t.sortable&&t.label)},this)))}}]),t}(o.a.Component),Ie=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"index",page:0,rowsPerPage:10},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a.gotoYouTube=function(e){return function(){var t="Portal+2+".concat(e.name.replace(/ /g,"+"),"+in+").concat(e.wr,"+Portals");window.open("https://www.youtube.com/results?search_query=".concat(t),"_blank").opener=null}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,r=t.data,n=this.state,c=n.order,i=n.orderBy,l=n.rowsPerPage,s=n.page,u=function(){return o.a.createElement(be.a,{placement:"right",title:"Disabled tracking records for this map.",disableFocusListener:!0,disableTouchListener:!0},o.a.createElement(ee.a,{className:a.helpLink},"n/a"))};return o.a.createElement(X.a,null,o.a.createElement(ae.a,{"aria-labelledby":"tableTitle"},o.a.createElement(Le,{order:c,orderBy:i,onRequestSort:this.handleRequestSort,rowCount:r.length}),o.a.createElement(ne.a,null,ge(r,c,i).slice(s*l,s*l+l).map(function(t){return o.a.createElement(de.a,{hover:!0,tabIndex:-1,key:t.id},o.a.createElement(ce.a,null,o.a.createElement(ee.a,{target:"_blank",rel:"noopener",color:"inherit",href:"https://steamcommunity.com/stats/Portal2/leaderboards/".concat(t.id)},t.name)),o.a.createElement(ce.a,{align:"center"},t.wr),o.a.createElement(ce.a,{align:"center"},!0===t.excluded?o.a.createElement(u,null):t.ties),o.a.createElement(ce.a,{align:"center"},o.a.createElement(be.a,{placement:"right",title:"Search record on YouTube",disableFocusListener:!0,disableTouchListener:!0},o.a.createElement(y.a,{color:"primary",onClick:e.gotoYouTube(t)},o.a.createElement(_e.a,null)))))}))),o.a.createElement(ue.a,{rowsPerPageOptions:[5,10,20,50,100],component:"div",count:r.length,rowsPerPage:l,page:s,labelDisplayedRows:function(){return""},backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(o.a.Component),Ae=Object(_.withStyles)(function(e){return{helpLink:{cursor:"help"}}})(Ie),qe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={searchTerm:""},a.setSearchTerm=function(e){a.setState({searchTerm:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"filterRecords",value:function(e){var t=this;return e.filter(function(e){return 0===t.state.searchTerm.length||e.name.toUpperCase().startsWith(t.state.searchTerm.toUpperCase())||e.wr===parseInt(t.state.searchTerm)})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Q.a,{container:!0},o.a.createElement(Q.a,{item:!0,xs:!1,md:1,lg:3}),o.a.createElement(Q.a,{item:!0,xs:12,md:10,lg:6},o.a.createElement(X.a,{className:t.searchBox},o.a.createElement(Te.a,null,o.a.createElement(Re.a,{placeholder:"Search",inputProps:{"aria-label":"Description"},onChange:this.setSearchTerm,disableUnderline:!0}))),o.a.createElement(Ae,{data:this.filterRecords(a)}))))}}]),t}(o.a.Component),Fe=Object(_.withStyles)(function(e){return{searchBox:{padding:10,marginBottom:3*e.spacing.unit}}})(qe),Me=a(20),We=a.n(Me),He=a(29),Ue=a(106),ze=[{id:"rank",numeric:!0,sortable:!1,label:"Rank"},{id:"name",numeric:!1,sortable:!1,label:"Player"},{id:"score",numeric:!0,sortable:!0,label:"Portals"}],Ve=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,r=t.orderBy;return o.a.createElement(le.a,null,o.a.createElement(de.a,null,ze.map(function(t){return o.a.createElement(ce.a,{key:t.id,align:t.numeric?"center":"left",sortDirection:r===t.id&&a},!0===t.sortable&&o.a.createElement(be.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},o.a.createElement(me.a,{active:r===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)),!1===t.sortable&&t.label)})))}}]),t}(o.a.Component),Ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={order:"asc",orderBy:"score",page:0,rowsPerPage:10},a.handleRequestSort=function(e,t){var r=t,n="desc";a.state.orderBy===t&&"desc"===a.state.order&&(n="asc"),a.setState({order:n,orderBy:r})},a.handleChangePage=function(e,t){a.setState({page:t})},a.handleChangeRowsPerPage=function(e){a.setState({rowsPerPage:e.target.value})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,r=e.handleClickOpen,n=this.state,c=n.order,i=n.orderBy,l=n.rowsPerPage,s=n.page;return o.a.createElement(X.a,null,o.a.createElement(ae.a,null,o.a.createElement(Ve,{order:c,orderBy:i,onRequestSort:this.handleRequestSort,rowCount:a.length}),o.a.createElement(ne.a,null,ge(a,c,i).slice(s*l,s*l+l).map(function(e){var a=e.getProfile(),n=e.getStats();return o.a.createElement(de.a,{hover:!0,tabIndex:-1,key:e.id},o.a.createElement(ce.a,{align:"center"},e.rank),o.a.createElement(ce.a,{align:"center",className:t.playerCell},o.a.createElement(H.a,{src:a&&a.avatar_link}),"\xa0\xa0\xa0\xa0\xa0\xa0",o.a.createElement(Ue.a,{className:t.clickLink,onClick:function(){return r(e.id)},color:"inherit"},a&&a.profile_name||e.id)),o.a.createElement(ce.a,{align:"center"},o.a.createElement(be.a,{placement:"top",title:"".concat(n.percentage,"% (").concat(e.score+n.delta,"+").concat(n.delta,")"),disableFocusListener:!0,disableTouchListener:!0},o.a.createElement("div",null,e.score))))}))),o.a.createElement(ue.a,{rowsPerPageOptions:[5,10,20,50,100],component:"div",count:a.length,rowsPerPage:l,page:s,labelDisplayedRows:function(){return""},backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(o.a.Component),Je=Object(_.withStyles)(function(e){return{playerCell:{display:"flex",alignItems:"center"},clickLink:{cursor:"pointer"}}})(Ye),Ke=o.a.createContext(),Ge=function(e){return function(t){return o.a.createElement(Ke.Consumer,null,function(a){return o.a.createElement(e,Object.assign({},a,t))})}},Qe=Ge(function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(He.a)(We.a.mark(function e(){return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.props.data.length){e.next=3;break}return e.next=3,this.props.downloadBoard(this.props.boardType);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.data,a=e.dialogOpener;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Q.a,{container:!0},o.a.createElement(Q.a,{item:!0,xs:!1,md:1,lg:3}),o.a.createElement(Q.a,{item:!0,xs:12,md:10,lg:6},o.a.createElement(Je,{data:t,handleClickOpen:a}))))}}]),t}(o.a.Component)),$e=a(88),Xe=a.n($e),Ze=a(89),et=a.n(Ze),tt=Object(_.createMuiTheme)({palette:{primary:{light:et.a[300],main:et.a[500],dark:et.a[700]},secondary:{light:"#fff",main:"#fff",dark:"#fff"}},typography:{useNextVariants:!0}}),at=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={currentTab:0},a.handleTabChange=function(e,t){a.setState({currentTab:t})},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.boards,r=a.sp,n=a.coop,c=a.overall,i=e.records,l=e.stats,s=e.currentProfile,u=e.playerCache,h=e.cacheProfile,d=e.clearProfile,p=this.state.currentTab;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{currentTab:p,onTabChange:this.handleTabChange}),o.a.createElement("div",{className:t.views},0===p&&o.a.createElement(Qe,{data:r,boardType:"sp",dialogOpener:h}),1===p&&o.a.createElement(Qe,{data:n,boardType:"coop",dialogOpener:h}),2===p&&o.a.createElement(Qe,{data:c,boardType:"overall",dialogOpener:h}),3===p&&o.a.createElement(Fe,{data:i}),4===p&&o.a.createElement(Ce,{data:l})),s&&o.a.createElement(je,{dialogOpen:null!==s,handleClose:d,data:u[s],profileId:s}))}}]),t}(o.a.PureComponent),rt=(r=Ge(Object(_.withStyles)(function(e){return{views:{marginTop:3*e.spacing.unit}}})(at)),function(e){return o.a.createElement(_.MuiThemeProvider,{theme:tt},o.a.createElement(Xe.a,null),o.a.createElement(r,e))}),nt=a(64),ot=a(107),ct=function(){function e(){Object(l.a)(this,e),this.baseApi="https://raw.githubusercontent.com/NeKzor/lp/api"}return Object(s.a)(e,[{key:"get",value:function(){var e=Object(He.a)(We.a.mark(function e(t){return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching ".concat(t)),e.next=3,fetch(this.baseApi+t+".json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProfiles",value:function(){var e=Object(He.a)(We.a.mark(function e(){var t;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/profiles");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(He.a)(We.a.mark(function e(){var t;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/wrs");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getStats",value:function(){var e=Object(He.a)(We.a.mark(function e(){var t;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/stats");case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBoard",value:function(){var e=Object(He.a)(We.a.mark(function e(t){var a;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("sp"===t||"coop"===t||"overall"===t){e.next=2;break}throw new Error("Invalid board!");case 2:return e.next=4,this.get("/boards/".concat(t));case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getPlayer",value:function(){var e=Object(He.a)(We.a.mark(function e(t){var a;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("/players/".concat(t));case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),it=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).perfectScores={sp:0,coop:0,overall:0},e.state={profiles:[],records:[],stats:[],currentProfile:null,playerCache:{},boards:{sp:[],coop:[],overall:[]},calcWrDelta:function(t){return Math.abs(e.state.findRecord(t.id).wr-t.score)},findRecord:function(t){return e.state.records.find(function(e){return e.id===t})},findProfile:function(t){return e.state.profiles.find(function(e){return e.id===t})},cacheProfile:function(t){return e.cacheProfile(t)},clearProfile:function(){return e.setState({currentProfile:null})},downloadBoard:function(){var t=Object(He.a)(We.a.mark(function t(a){return We.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.downloadBoard(a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},e.api=new ct,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(He.a)(We.a.mark(function e(){var t,a,r;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.getProfiles();case 2:return t=e.sent,e.next=5,this.api.getRecords();case 5:return a=e.sent,e.next=8,this.api.getStats();case 8:r=e.sent,this.initRecords(r.tied_records,a),this.setState({records:a,stats:r,profiles:t});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initRecords",value:function(e,t){var a=!0,r=!1,n=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var i=o.value;i.ties=e[i.id],i.excluded?i.ties=0:(1===i.mode?this.perfectScores.sp+=i.wr:2===i.mode&&(this.perfectScores.coop+=i.wr),this.perfectScores.overall+=i.wr)}}catch(l){r=!0,n=l}finally{try{a||null==c.return||c.return()}finally{if(r)throw n}}}},{key:"downloadBoard",value:function(){var e=Object(He.a)(We.a.mark(function e(t){var a,r,n,o,c,i,l,s,u=this;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,e.next=3,this.api.getBoard(t);case 3:r=e.sent,n=!0,o=!1,c=void 0,e.prev=7,i=r[Symbol.iterator]();case 9:if(n=(l=i.next()).done){e.next=28;break}if((s=l.value).getProfile=function(){var e=this;return void 0===this._profile&&(this._profile=a.state.profiles.find(function(t){return t.id===e.id})),this._profile},"sp"!==t){e.next=16;break}s.getStats=function(){return void 0===this._stats&&(this._stats={delta:a.perfectScores.sp-this.score,percentage:Math.round(a.perfectScores.sp/this.score*100)}),this._stats},e.next=25;break;case 16:if("coop"!==t){e.next=20;break}s.getStats=function(){return void 0===this._stats&&(this._stats={delta:a.perfectScores.coop-this.score,percentage:Math.round(a.perfectScores.coop/this.score*100)}),this._stats},e.next=25;break;case 20:if("overall"!==t){e.next=24;break}s.getStats=function(){return void 0===this._stats&&(this._stats={delta:a.perfectScores.overall-this.score,percentage:Math.round(a.perfectScores.overall/this.score*100)}),this._stats},e.next=25;break;case 24:throw new Error("Invalid board type!");case 25:n=!0,e.next=9;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(7),o=!0,c=e.t0;case 34:e.prev=34,e.prev=35,n||null==i.return||i.return();case 37:if(e.prev=37,!o){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(34);case 42:this.setState(function(e){return{boards:Object(ot.a)({},e.boards,Object(nt.a)({},t,r))}},function(){return console.log("Updated state:",u.state)});case 43:case"end":return e.stop()}},e,this,[[7,30,34,42],[35,,37,41]])}));return function(t){return e.apply(this,arguments)}}()},{key:"cacheProfile",value:function(){var e=Object(He.a)(We.a.mark(function e(t){var a,r,n,o,c,i,l,s,u;return We.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this.state.playerCache[t]){e.next=29;break}return console.log("Caching ".concat(t,"...")),e.next=4,this.api.getPlayer(t);case 4:for(a=e.sent,r=[],n=!0,o=!1,c=void 0,e.prev=9,i=a.entries[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)s=l.value,r.push({id:s.id,name:this.state.findRecord(s.id).name,score:s.score,wrDelta:this.state.calcWrDelta(s),video:null});e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),o=!0,c=e.t0;case 17:e.prev=17,e.prev=18,n||null==i.return||i.return();case 20:if(e.prev=20,!o){e.next=23;break}throw c;case 23:return e.finish(20);case 24:return e.finish(17);case 25:u=this.state.findProfile(t),this.setState(function(e){return{currentProfile:t,playerCache:Object(ot.a)({},e.playerCache,Object(nt.a)({},t,{profile:{name:u.profile_name,avatar:u.avatar_link},sp:a.sp_score,coop:a.coop_score,overall:a.overall_score,entries:r}))}}),e.next=31;break;case 29:console.log("From cache: ".concat(t)),this.setState({currentProfile:t});case 31:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(Ke.Provider,{value:this.state},this.props.children)}}]),t}(o.a.Component),lt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function st(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ut=o.a.createElement(it,null,o.a.createElement(rt,null));i.a.render(ut,document.querySelector("#root")),function(){if("serviceWorker"in navigator){if(new URL("/lp",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/lp","/service-worker.js");lt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):st(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):st(e)})}}()}},[[213,1,2]]]);
//# sourceMappingURL=main.98641f2d.chunk.js.map